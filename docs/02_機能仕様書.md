# 機能仕様書

## 1. システム概要

### 1.1 目的
REST APIテストアプリケーションは、開発者やテスターがREST APIのエンドポイントを簡単にテストできるWebベースのツールです。

### 1.2 対象ユーザー
- API開発者
- QAエンジニア
- システムインテグレーター
- 技術サポート担当者

## 2. 機能要件

### 2.1 基本機能

#### 2.1.1 エンドポイント入力機能
- **説明**: APIエンドポイントのURLを入力
- **入力形式**: テキストボックス
- **検証**:
  - URL形式の妥当性チェック
  - 必須入力チェック
- **対応プロトコル**: HTTP/HTTPS

#### 2.1.2 HTTPメソッド選択機能
- **説明**: HTTPリクエストメソッドを選択
- **対応メソッド**:
  - GET
  - POST
  - PUT
  - DELETE
  - PATCH
- **UI**: ドロップダウンリスト
- **デフォルト値**: GET

#### 2.1.3 パラメータ入力機能
- **説明**: リクエストパラメータをKey-Value形式で入力
- **機能詳細**:
  - 動的なパラメータ行の追加/削除
  - 最低1行は常に表示
  - 空のKeyは送信時に無視
- **パラメータ形式**:
  - GET: クエリストリングとして送信
  - その他: JSONボディとして送信

#### 2.1.4 APIテスト実行機能
- **説明**: 設定した内容でAPIリクエストを実行
- **処理内容**:
  1. 入力検証
  2. リクエスト構築
  3. API呼び出し
  4. レスポンス受信
  5. 結果表示
- **エラーハンドリング**:
  - ネットワークエラー
  - タイムアウト
  - 不正なレスポンス

#### 2.1.5 レスポンス表示機能
- **表示項目**:
  - HTTPステータスコード
  - レスポンスヘッダー
  - レスポンスボディ
- **整形機能**:
  - JSON自動整形（Pretty Print）
  - シンタックスハイライト（実装により異なる）
- **表示領域**:
  - スクロール可能
  - 最大高さ制限あり

### 2.2 ユーザーインターフェース要件

#### 2.2.1 レイアウト
- レスポンシブデザイン
- 最大幅: 800px
- モバイル対応（600px以下でレイアウト変更）

#### 2.2.2 カラースキーム
- メイン背景: グラデーション（#667eea → #764ba2）
- コンテナ背景: 白
- アクセントカラー: 紫系統

#### 2.2.3 インタラクション
- ボタンホバーエフェクト
- フォーカス時の視覚的フィードバック
- ローディング表示

## 3. 非機能要件

### 3.1 パフォーマンス
- **レスポンス時間**: 3秒以内（ネットワーク遅延を除く）
- **最大レスポンスサイズ**: 10MB
- **同時実行**: 1リクエストずつ（連続実行を防止）

### 3.2 ユーザビリティ
- **操作性**: 直感的なUI
- **エラーメッセージ**: 日本語で分かりやすく表示
- **入力補助**: プレースホルダーテキスト

### 3.3 互換性
- **ブラウザ対応**:
  - Chrome (最新版)
  - Firefox (最新版)
  - Safari (最新版)
  - Edge (最新版)

### 3.4 セキュリティ
- **XSS対策**: 入力値のサニタイズ
- **CORS対応**: サーバーサイドプロキシ経由
- **HTTPS推奨**: セキュアな通信

## 4. 制約事項

### 4.1 技術的制約
- **CORS制限**: ブラウザのセキュリティポリシーに依存
- **ファイルアップロード**: 未対応
- **WebSocket**: 未対応
- **GraphQL**: 未対応

### 4.2 運用制約
- **Google Apps Script版**:
  - 実行時間制限: 6分
  - URLフェッチ制限: 20MB
  - 日次クォータ制限あり

- **Flutter版**:
  - Webプラットフォームのみ対応
  - ローカル実行環境必要

- **Spring Boot版**:
  - Java 17以上必要
  - メモリ使用量: 最小256MB

## 5. 画面遷移

```
[メイン画面]
    │
    ├─[エンドポイント入力]
    │
    ├─[メソッド選択]
    │
    ├─[パラメータ設定]
    │   ├─[パラメータ追加]
    │   └─[パラメータ削除]
    │
    ├─[テスト実行]
    │   └─[ローディング表示]
    │
    └─[結果表示]
        ├─[成功時: レスポンス詳細]
        └─[失敗時: エラーメッセージ]
```

## 6. エラー処理

### 6.1 入力エラー
| エラー種別 | メッセージ | 対処 |
|-----------|----------|------|
| エンドポイント未入力 | "エンドポイントを入力してください" | アラート表示 |
| 不正なURL形式 | "正しいURL形式で入力してください" | アラート表示 |

### 6.2 通信エラー
| エラー種別 | メッセージ | 対処 |
|-----------|----------|------|
| ネットワークエラー | "ネットワークエラーが発生しました" | エラー表示 |
| タイムアウト | "リクエストがタイムアウトしました" | エラー表示 |
| CORS エラー | "CORSエラーが発生しました" | エラー表示 |

### 6.3 サーバーエラー
| エラー種別 | メッセージ | 対処 |
|-----------|----------|------|
| 4xx エラー | ステータスコードと詳細を表示 | レスポンス表示 |
| 5xx エラー | ステータスコードと詳細を表示 | レスポンス表示 |

## 7. 今後の拡張機能（検討中）

1. **リクエスト履歴機能**
   - 過去のリクエストを保存・再利用

2. **認証機能**
   - Bearer Token
   - API Key
   - Basic認証

3. **ヘッダーカスタマイズ**
   - 任意のHTTPヘッダー追加

4. **レスポンス保存機能**
   - JSON/CSVエクスポート

5. **環境変数機能**
   - 環境別エンドポイント管理

6. **自動テスト機能**
   - アサーション設定
   - テストスイート実行